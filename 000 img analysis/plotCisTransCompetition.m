color_palette

mama_folder_path_list = {...    
    'F:\180731 c1\c1\',...
    'F:\180731 c2\c2\',...
    'F:\180731 c3\c3\',...
    'F:\180731 c4\c4\',...
    'F:\180731 c5\c5\',...
    'F:\180731 c6\c6\',...
    'O:\000 Fast Cam Data\180725 c1\c1\',...
    'O:\000 Fast Cam Data\180725 c2\c2\',...
    'O:\000 Fast Cam Data\180725 c3\c3\',...
    'O:\000 Fast Cam Data\180725 c4\c4\',...
    'O:\000 Fast Cam Data\180725 c5\c5\',...
    'O:\000 Fast Cam Data\180725 c6\c6\'
%     'O:\000 Fast Cam Data\180717 c1\c1\',...
%     'O:\000 Fast Cam Data\180717 c2\c2\',...
%     'O:\000 Fast Cam Data\180717 c3\c3\',...
%     'O:\000 Fast Cam Data\180714 c1\c1\',...
%     'O:\000 Fast Cam Data\180714 c2\c2\',...
%     'O:\000 Fast Cam Data\180714 c3\c3\',...
%     'O:\000 Fast Cam Data\180714 c4\c4\',...
%     'O:\000 Fast Cam Data\180714 c5\c5\'
%     'P:\000 Fast Cam Data\180711 c1\c1\',...
%     'P:\000 Fast Cam Data\180711 c2\c2\',...
%     'P:\000 Fast Cam Data\180711 c3\c3\',...
%     'P:\000 Fast Cam Data\180711 c4\c4\',...
%     'P:\000 Fast Cam Data\180711 c5\c5\'
%     'P:\000 Fast Cam Data\180703 c1\c1\',...
%     'P:\000 Fast Cam Data\180703 c2\c2\',...
%     'P:\000 Fast Cam Data\180703 c3\c3\',...
%     'P:\000 Fast Cam Data\180703 c4\c4\',...
%     'P:\000 Fast Cam Data\180703 c5\c5\',...
%     'P:\000 Fast Cam Data\180703 c6\c6\',...
%     'P:\000 Fast Cam Data\180626 c1\c1\',...
%     'P:\000 Fast Cam Data\180626 c2\c2\',...
%     'P:\000 Fast Cam Data\180626 c3\c3\',...
%     'D:\001 RAW MOVIES\180619 c1\c1',...
                    };
                
              %     'F:\180723 c1\c1\',...
%     'F:\180723 c2\c2\',...
%     'F:\180723 c3\c3\',...
%     'F:\180723 c4\c4\'
  

saveToFdPath  = 'D:\000 RAW DATA FILES\180700 Cis-trans sync competition\';

for i_cell = 1:numel(mama_folder_path_list)
    %% Folders to rename
    mama_folder_path   = mama_folder_path_list{i_cell};
    if mama_folder_path(end) == '\' || mama_folder_path(end) == '/'
        [temp,~,~]= fileparts(mama_folder_path(1:end-1)); 
    else
        [temp,~,~]= fileparts(mama_folder_path); 
    end
    [~,experiment,~] = fileparts(temp), clearvars temp        
    AB00_experimentalConditions;
    
    axialMatFilePath    = fullfile(mama_folder_path,'03Axial',...
                                   'Synchronization.mat');
    crossMatFilePath    = fullfile(mama_folder_path,'04Cross',...
                                   'Synchronization.mat');
    cisMatFilePath      = fullfile(mama_folder_path,cisTransFlow{1},...
                                   'Synchronization.mat');
    transMatFilePath    = fullfile(mama_folder_path,cisTransFlow{2},...
                                   'Synchronization.mat');
    h_list              = cell(1,1);
    MarkerList          = {'s--','o--'};
    colorList           = {YangHong,BaoLan};
    TSyncFlowList       = cell(2,1);           
    figure()
    set(gcf,'DefaultAxesFontSize',10,'DefaultAxesFontWeight','normal',...
        'DefaultAxesLineWidth',1.5,'unit','normalized',...
        'position',[0.2,0.2,0.5,0.4],'PaperPositionMode','auto',...
        'DefaultTextInterpreter','Latex')
    
    
    for i_ct = 1:2 % 1:cis flow 2: trans flow
        load(fullfile(mama_folder_path,cisTransFlow{i_ct},...
                                   'Synchronization.mat'));
        TSyncFlow = (TSync1_list+TSync2_list)/20; 
        TSyncFlowList{i_ct} = TSyncFlow;
        
        subplot(1,3,1:2)
        h=plot(freqList-centralFreq,TSyncFlow,MarkerList{i_ct},...
            'MarkerSize',10,'LineWidth',1.5,'Color',colorList{i_ct}); hold on
        h_list{i_ct} = h;    
    end
    
    set(gca,'DefaultTextInterpreter','Latex')
    xlim([-7,7])
    ylim([0,1])
    xticks(-6:2:6)
    xlabel('f-$f_0$ (Hz)')
    ylabel('$(T_{cis,trans})/T$')
    legend([h_list{1},h_list{2}],{'cis flow','trans flow'},...
           'Location','northeast','fontsize',8,...
           'Box','on')
    
    
    subplot(1,3,3)
    set(gca,'DefaultTextInterpreter','Latex')
    if numel(TSyncFlowList{1}) ==  numel(TSyncFlowList{2}) 
        plot(freqList-centralFreq,TSyncFlowList{1}-TSyncFlowList{2},...
             'o','MarkerSize',10,'LineWidth',2.5,'Color','k');
    else
        N_plot = min(numel(TSyncFlowList{1}),numel(TSyncFlowList{2}));
        temp1  = TSyncFlowList{1}; temp2 = TSyncFlowList{2};
        temp1  = temp1(1:N_plot);  temp2  = temp2(1:N_plot);
        plot(freqList(1:N_plot)-centralFreq,temp1-temp2,...
             'o','MarkerSize',10,'LineWidth',2.5,'Color','k');
    end    
    xlim([-7,7])
    xticks(-6:2:6)
    ylim([-1,1])
    xlabel('f-$f_0$ (Hz)')
    ylabel('$(T_{cis}-T_{trans})/T$')
    patch([-7,-7,7,7],[0,1,1,0],colorList{1},'EdgeColor','None',...
         'FaceColor',colorList{1},'FaceAlpha',0.1);
    patch([-7,-7,7,7],[0,-1,-1,0],colorList{2},'EdgeColor','None',...
         'FaceColor',colorList{2},'FaceAlpha',0.1);

    figPath = fullfile(saveToFdPath,experiment);    
    print(gcf,figPath,'-dpng','-r300');
    savefig(gcf,figPath);
    if mod(i_cell,5)==0
        close all
    end
end
    
    